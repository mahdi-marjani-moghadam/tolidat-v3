!function(e,t){e.fn.autoComplete=function(){var a=n.call(arguments),o=this,l=a.shift(),i="string"==typeof l;return i&&(l=l.replace(".","-")),a="button-supply"===l||"direct-supply"===l?e.isArray(a[0])&&e.isArray(a[0][0])?a[0]:a:a[1]===t&&e.isArray(a[0])?a[0]:a,i?e(o)["option"===l&&a.length<2?"triggerHandler":"trigger"]("autoComplete."+l,a):l&&l[e.expando]?e(o).trigger(l,a):r.call(o,l)},e.fn.bgiframe=e.fn.bgiframe?e.fn.bgiframe:e.fn.bgIframe?e.fn.bgIframe:function(){return this},e.expando=e.expando!==t?e.expando:function(){var t,a=e.Event("keyup");for(t in a)if(0===t.indexOf("jQuery"))return t;return"jQuery"+a.timeStamp}();var a=!0,o=!1,n=Array.prototype.slice,l=e.autoComplete={counter:0,length:0,stack:{},order:[],hasFocus:o,getFocus:function(){return this.order[0]?this.stack[this.order[0]]:t},getPrevious:function(){for(var e=1,a=this.order.length;e<a;e++)if(this.order[e])return this.stack[this.order[e]];return t},remove:function(e){for(var a=0,o=this.order.length;a<o;a++)this.order[a]===e&&(this.order[a]=t);this.stack[e]=t,this.length--,delete this.stack[e]},getAll:function(){for(var t=0,a=this.counter,o=[];t<a;t++)this.stack[t]&&o.push(this.stack[t]);return e(o)},defaults:{backwardsCompatible:o,ajax:"ajax.php",ajaxCache:e.ajaxSettings.cache,dataSupply:[],dataFn:t,dataName:"ac-data",list:"auto-complete-list",rollover:"auto-complete-list-rollover",width:t,striped:t,maxHeight:t,newList:o,postVar:"value",postData:{},minChars:1,maxItems:-1,maxRequests:0,requestType:"POST",inputControl:t,autoFill:o,nonInput:t,multiple:o,multipleSeparator:" ",onBlur:t,onFocus:t,onHide:t,onLoad:t,onMaxRequest:function(){},onRollover:t,onSelect:t,onShow:t,onSubmit:function(){return a},spinner:t,preventEnterSubmit:a,delay:0,useCache:a,cacheLimit:50}},r=function(r){return this.each(function(){var i,u,s,p,d,c,m,h,f,v=this,g=e(v).attr("autocomplete","off"),C=a,b={},y="",x={length:0},S=o,w=-1,k=(l.length++,++l.counter),_=0,q={length:0,val:t,list:{}},F=e.extend({width:g.outerWidth()},l.defaults,r||{},e.metadata?g.metadata():{}),T=!F.newList&&e("ul."+F.list)[0]?e("ul."+F.list).eq(0).bgiframe().data("autoComplete",a):e("<ul/>").appendTo("body").addClass(F.list).bgiframe().hide().data("ac-selfmade",a).data("autoComplete",a),R=e(document).bind("click.autoComplete-"+k,function(t){var a;C&&S&&(!b||t.timeStamp-b.timeStamp>200)&&(a=e(t.target)).closest("ul").data("ac-input-index")!==k&&a.data("ac-input-index")!==k&&(T.hide(t),g.blur()),b=t});function j(n,l,r,i,u){return l.spinner&&l.spinner.call(v,n,{active:a,ul:T}),c&&(c=clearTimeout(c)),l.delay>0&&u===t?c=setTimeout(function(){j(n,l,r,i,a),c=clearTimeout(c)},l.delay):(m&&m.abort(),l.useCache&&r.list[r.val]?A(n,r.list[r.val],l,r,i):l.dataSupply.length?function(a,o,n,l){for(var r,i=[],u=[],s=e.isFunction(o.dataFn),p=s?t:new RegExp("^"+n.val,"i"),d=0,c=0,m=o.dataSupply.length;c<m;c++)if(r="object"==typeof(r=o.dataSupply[c])&&r.value?r:{value:r},u=o.backwardsCompatible?[n.val,r.value,i,c,o.dataSupply,T,a]:[a,{val:n.val,entry:r.value,list:i,i:c,supply:o.dataSupply,ul:T}],s&&o.dataFn.apply(v,u)||!s&&r.value.match(p)){if(o.maxItems>-1&&++d>o.maxItems)break;i.push(r)}return A(a,i,o,n,l)}(n,l,r,i):l.maxRequests&&++_>=l.maxRequests?(T.html("").hide(n),l.spinner&&l.spinner.call(v,n,{active:o,ul:T}),_>l.maxRequests?o:l.onMaxRequest.apply(v,l.backwardsCompatible?[r.val,T,n,y]:[n,{search:r.val,val:y,ul:T}])):(l.postData[l.postVar]=r.val,m=e.ajax({type:l.requestType,url:l.ajax,data:l.postData,dataType:"json",cache:l.ajaxCache,success:function(e){A(n,e,l,r,i)},error:function(){T.html("").hide(n),l.spinner&&l.spinner.call(v,n,{active:o,ul:T})}})))}function I(o){return S&&(F.onSelect&&F.onSelect.apply(v,F.backwardsCompatible?[h,i,T,o]:[o,{data:h,li:i,ul:T}]),D(t),y=g.val(),"keydown"==b.type&&(b[e.expando+"_autoComplete_enter"]=a)),T.hide(o),i}function L(e){if(i&&i.removeClass(F.rollover),T.show(e),i=x.eq(w).addClass(F.rollover),h=i.data(F.dataName),!i.length||!h)return o;D(h.value||""),F.onRollover&&F.onRollover.apply(v,F.backwardsCompatible?[h,i,T,e]:[e,{data:h,li:i,ul:T}]);var t=w*p;return t<u-s&&(u=t+s,T.scrollTop(t)),i}function N(e){if(i&&i.removeClass(F.rollover),T.show(e),i=x.eq(w).addClass(F.rollover),h=i.data(F.dataName),!i.length||!h)return o;D(h.value||"");var t=(w+1)*p;return t>u&&T.scrollTop((u=t)-s),F.onRollover&&F.onRollover.apply(v,F.backwardsCompatible?[h,i,T,e]:[e,{data:h,li:i,ul:T}]),i}function H(){if(!T[e.expando+"_autoComplete"]){var t=T.hide,n=T.show;T.hide=function(n,l,r){return F.onHide&&S&&(F.onHide.call(v,n,{ul:T}),b[e.expando+"_autoComplete_hide"]=a),S=o,t.call(T,l,r)},T.show=function(e,t,o){return F.onShow&&!S&&F.onShow.call(v,e,{ul:T}),S=a,n.call(T,t,o)},T[e.expando+"_autoComplete"]=a}var l=T.data("ac-inputs")||{};return l[k]=a,T.data("ac-inputs",l)}function D(e){if(e===t){n=l=g.val().length}else{f&&(e=y.substr(0,y.length-y.split(f).pop().length)+e+f);var n=y.length,l=e.length;g.val(e)}if(!F.autoFill||n>l)return o;if(v.createTextRange){var r=v.createTextRange();e===t?(r.move("character",n),r.select()):(r.collapse(a),r.moveStart("character",n),r.moveEnd("character",l),r.select())}else v.setSelectionRange?v.setSelectionRange(n,l):v.selectionStart&&(v.selectionStart=n,v.selectionEnd=l);return a}function A(a,n,l,r,c){if(l.onLoad&&(n=l.onLoad.call(v,a,{list:n,settings:l,cache:r,ul:T})),l.spinner&&l.spinner.call(v,a,{active:o,ul:T}),l.useCache&&r.list[r.val]===t&&(r.length++,r.list[r.val]=n,r.length>l.cacheLimit&&(r.list={},r.length=0)),!n||n.length<1)return T.html("").hide(a);w=-1;for(var m=g.offset(),C=[],S=0,_=0,q=0,F=o,R=n.length;q<R;q++)if(n[q].value){if(l.maxItems>-1&&++S>l.maxItems)break;C.push(l.striped&&F?'<li class="'+l.striped+'">':"<li>",n[q].display||n[q].value,"</li>"),F=!F}for(R=(x=T.html(C.join("")).children("li")).length;_<R;_++)e.data(x[_],l.dataName,n[_]),e.data(x[_],"ac-index",_);return l.autoFill&&!c&&(w=0,D((h=n[0]).value||""),i=x.eq(0).addClass(l.rollover)),T.unbind(".autoComplete").data("ac-input-index",k).bind("mouseout.autoComplete",function(){i.removeClass(l.rollover)}).bind("mouseover.autoComplete",function(t){if((i=e(t.target).closest("li")).length<1)return o;x.filter("."+l.rollover).removeClass(l.rollover),w=i.addClass(l.rollover).data("ac-index"),h=i.data(l.dataName),l.onRollover&&l.onRollover.apply(v,l.backwardsCompatible?[h,i,T,t]:[t,{data:h,li:i,ul:T}])}).bind("click.autoComplete",function(a){g.trigger("focus",[e.expando+"_autoComplete"]),h=i.data(l.dataName),g.val(y=f?y.substr(0,y.length-y.split(f).pop().length)+h.value+f:h.value),T.hide(a),D(t),l.onSelect&&l.onSelect.apply(v,l.backwardsCompatible?[h,i,T,a]:[a,{data:h,li:i,ul:T}])}).css({top:m.top+g.outerHeight(),left:m.left,width:l.width}).scrollTop(0),l.maxHeight&&T.css({height:p*x.length>l.maxHeight?l.maxHeight:"auto",overflow:"auto"}),s=T.show(a).outerHeight(),u=s,p=x.eq(0).outerHeight(),d=Math.floor(u/p),b.timeStamp=(new Date).getTime(),T}H(),F.requestType=F.requestType.toUpperCase(),f=F.multiple?F.multipleSeparator:t,l.stack[k]=v,g.data("autoComplete",a).data("ac-input-index",k).data("ac-active",C).data("ac-initial-settings",e.extend(a,{},F)).data("ac-settings",F).bind(window.opera?"keypress.autoComplete":"keydown.autoComplete",function(t){if(!C)return a;var n=(b=t).keyCode,l=o;if(9==n&&S)I(t);else if(13==n&&i)l=F.preventEnterSubmit&&S?o:a,I(t);else if(38==n)w>0?(w--,L(t)):(w=-1,g.val(y),T.hide(t));else if(40==n)w<x.length-1&&(w++,N(t));else if(33==n)w>0&&((w-=d)<0&&(w=0),L(t));else if(34==n)w<x.length-1&&((w+=d)>x.length-1&&(w=x.length-1),N(t));else{if(!F.nonInput||!e.inArray(n,F.nonInput))return a;T.html("").hide(t)}return b[e.expando+"_autoComplete_keydown"]=a,l}).bind("keyup.autoComplete",function(o){if(!C||b[e.expando+"_autoComplete_keydown"])return a;y=g.val();var n=(b=o).keyCode,l=f?y.split(f).pop():y;13!=n&&(q.val=F.inputControl===t?l:F.inputControl.apply(v,F.backwardsCompatible?[l,n,T,o]:[o,{val:l,key:n,ul:T}]),q.val.length>=F.minChars?j(o,F,q,8==n||32==n):8==n&&T.html("").hide(o))}).bind("blur.autoComplete",function(e){if(!C||S)return a;b=e,g.data("ac-hasFocus",o),w=-1,l.order[0]!==t&&l.order.unshift(t),l.hasFocus=o,T.hide(e),F.onBlur&&F.onBlur.apply(v,F.backwardsCompatible?[y,T,e]:[e,{val:y,ul:T}])}).bind("focus.autoComplete",function(o,n){if(!C||l.focus===k&&n===e.expando+"_autoComplete"||b[e.expando+"_autoComplete_enter"])return a;b=o,k!=T.data("ac-input-index")&&T.html("").hide(o),g.data("ac-hasFocus",a),l.order[0]===t?l.order[1]===k?l.order.shift():l.order[0]=k:l.order[0]!=k&&l.order[1]!=k&&l.order.unshift(k),l.order.length>l.defaults.cacheLimit&&l.order.pop(),l.hasFocus=a,F.onFocus&&F.onFocus.apply(v,F.backwardsCompatible?[T,o]:[o,{ul:T}])}).bind("autoComplete.settings",function(o,n){if(!C)return a;if(e.isFunction(n)){var l=n.apply(v,F.backwardsCompatible?[F,q,T,o]:[o,{settings:F,cache:q,ul:T}]);e.isArray(l)&&l[0]!==t&&(F=e.extend(a,{},F,l[0]||F),q=e.extend(a,{},q,l[1]||q))}else F=e.extend(a,{},F,n||{});return F.requestType=F.requestType.toUpperCase(),f=F.multiple?F.multipleSeparator:t,g.data("ac-settings",F),T=!F.newList&&T.hasClass(F.list)?T:!F.newList&&e("ul."+F.list)[0]?e("ul."+F.list).bgiframe().data("autoComplete",a):e("<ul/>").appendTo("body").addClass(F.list).bgiframe().hide().data("ac-selfmade",a).data("autoComplete",a),H(),b=o}).bind("autoComplete.flush",function(e,o){return C?(q={length:0,val:t,list:{}},o||(_=0),b=e):a}).bind("autoComplete.button-ajax",function(t,o,n){return C?(b=t,g.trigger("focus",[e.expando+"_autoComplete"]),"string"==typeof o&&(n=o,o={}),q.val=n||"NON_404_<>!@$^&",j(t,e.extend(a,{},F,{maxItems:-1,postData:o||{}}),q)):a}).bind("autoComplete.button-supply",function(o,n,l){return C?(b=o,g.trigger("focus",[e.expando+"_autoComplete"]),"string"==typeof n&&(l=n,n=t),q.val=l||"NON_404_SUPPLY_<>!@$^&",n=e.isArray(n)&&n.length?n:F.dataSupply,j(o,e.extend(a,{},F,{maxItems:-1,dataSupply:n,dataFn:function(){return a}}),q)):a}).bind("autoComplete.direct-supply",function(o,n,l){return C?(b=o,g.trigger("focus",[e.expando+"_autoComplete"]),"string"==typeof n&&(l=n,n=t),q.val=l||"NON_404_SUPPLY_<>!@$^&",A(o,n=e.isArray(n)&&n.length?n:F.dataSupply,e.extend(a,{},F,{maxItems:-1,dataSupply:n,dataFn:function(){return a}}),q)):a}).bind("autoComplete.search",function(e,t){return C?(q.val=t||"",j(b=e,F,q)):a}).bind("autoComplete.option",function(e){if(!C)return a;b=e;var o=n.call(arguments),l=o.length;return 3==l?(F[o[1]]=o[2],g.data("ac-settings",F),o[2]):2==l?function(){switch(o[1]){case"ul":return T;case"cache":return q;case"xhr":return m;case"input":return g;default:return F[o[1]]||t}}():F}).bind("autoComplete.enable",function(e){return g.data("ac-active",C=a),b=e}).bind("autoComplete.disable",function(e){return g.data("ac-active",C=o),T.html("").hide(e),b=e}).bind("autoComplete.destroy",function(e){g.removeData("autoComplete").removeData("ac-input-index").removeData("ac-initial-settings").removeData("ac-settings").removeData("ac-active").unbind(".autoComplete").unbind("autoComplete."+["settings","flush","button-ajax","button-supply","direct-supply","search","option","enable","disable","destroy"].join(" autoComplete.")).parents("form").eq(0).unbind("submit.autoComplete-"+k),R.unbind("click.autoComplete-"+k),l.remove(k),C=o;var n,r=T.html("").hide(e).data("ac-inputs");for(n in r[k]=t,r)if(r[n]===a)return b=e;return T.data("ac-selfmade")===a&&T.remove(),b=e}).parents("form").eq(0).bind("submit.autoComplete-"+k,function(t){if(!C)return a;var n=b[e.expando+"_autoComplete_enter"]||o;return b=t,F.preventEnterSubmit&&(S||n)?o:F.onSubmit.call(v,t,{form:this,ul:T})})})}}(jQuery);